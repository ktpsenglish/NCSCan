<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å»£æ±è©±è¶£å‘³å­¸å ‚ | Cantonese Fun Learning</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Custom animations not in Tailwind default */
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(5%); }
        }
        .animate-bounce-slow {
            animation: bounce-slow 3s infinite;
        }
        .text-shadow-sm {
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .stroke-text {
            -webkit-text-stroke: 2px #4f46e5; /* Indigo-600 */
            color: white;
        }
        /* Hide scrollbar for cleaner look */
        body::-webkit-scrollbar {
            width: 0.5em;
        }
        body::-webkit-scrollbar-track {
            box-shadow: inset 0 0 6px rgba(0,0,0,0.1);
        }
        body::-webkit-scrollbar-thumb {
            background-color: darkgrey;
            outline: 1px solid slategrey;
            border-radius: 10px;
        }
        .font-urdu {
            font-family: 'Noto Nastaliq Urdu', serif;
        }
    </style>
    <!-- Add Noto Nastaliq Urdu for better Urdu rendering -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        // --- Globals ---
        const { useState, useEffect, useRef } = React;

        // --- Icons (Inline SVG to avoid CDN dependency issues) ---
        const Icon = ({ children, size = 24, className = "", ...props }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className} 
                {...props}
            >
                {children}
            </svg>
        );

        const Volume2 = (props) => <Icon {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" /><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" /></Icon>;
        const Mic = (props) => <Icon {...props}><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></Icon>;
        const ArrowLeft = (props) => <Icon {...props}><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></Icon>;
        const Star = (props) => <Icon {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></Icon>;
        const Play = (props) => <Icon {...props}><polygon points="5 3 19 12 5 21 5 3"/></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>;
        const XCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></Icon>;
        const Trophy = (props) => <Icon {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></Icon>;
        const Home = (props) => <Icon {...props}><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></Icon>;
        const BookOpen = (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></Icon>;
        const Brain = (props) => <Icon {...props}><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></Icon>;
        const Sparkles = (props) => <Icon {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H5"/><path d="M19 15v4"/><path d="M15 17h4"/></Icon>;
        const Smile = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></Icon>;
        const MessageCircle = (props) => <Icon {...props}><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></Icon>;
        const FileText = (props) => <Icon {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></Icon>;
        const Music = (props) => <Icon {...props}><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></Icon>;
        const VolumeX = (props) => <Icon {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></Icon>;

        // --- æ•¸æ“šè³‡æ–™åº« (Vocabulary Data) ---
        const vocabData = [
          {
            id: 'greetings',
            title: 'æ—¥å¸¸ç¦®è²Œ',
            titleEng: 'Greetings',
            emoji: 'ğŸ‘‹',
            theme: 'bg-yellow-400', 
            words: [
              { id: '1-1', term: 'ä½ å¥½', written: 'ä½ å¥½', jyutping: 'nei5 hou2', eng: 'Hello', urdu: 'ÛÛŒÙ„Ùˆ', viet: 'Xin chÃ o', emoji: 'ğŸ‘‹' },
              { id: '1-2', term: 'æ—©æ™¨', written: 'æ—©å®‰', jyutping: 'zou2 san4', eng: 'Good Morning', urdu: 'ØµØ¨Ø­ Ø¨Ø®ÛŒØ±', viet: 'ChÃ o buá»•i sÃ¡ng', emoji: 'ğŸŒ…' },
              { id: '1-3', term: 'åˆå®‰', written: 'åˆå®‰', jyutping: 'ng5 on1', eng: 'Good Afternoon', urdu: 'Ø¯ÙˆÙ¾ÛØ± Ø¨Ø®ÛŒØ±', viet: 'ChÃ o buá»•i chiá»u', emoji: 'â˜€ï¸' },
              { id: '1-4', term: 'æ™šä¸Šå¥½', written: 'æ™šä¸Šå¥½', jyutping: 'maan5 soeng6 hou2', eng: 'Good Evening', urdu: 'Ø´Ø§Ù… Ø¨Ø®ÛŒØ±', viet: 'ChÃ o buá»•i tá»‘i', emoji: 'ğŸŒ™' },
              { id: '1-5', term: 'å¤šè¬', written: 'è¬è¬', jyutping: 'do1 ze6', eng: 'Thank you (gift)', urdu: 'Ø´Ú©Ø±ÛŒÛ', viet: 'Cáº£m Æ¡n (quÃ )', emoji: 'ğŸ' },
              { id: '1-6', term: 'å””è©²', written: 'è¬è¬ / å‹é§•', jyutping: 'm4 goi1', eng: 'Thank you / Please', urdu: 'Ø´Ú©Ø±ÛŒÛ / Ø¨Ø±Ø§Û Ú©Ø±Ù…', viet: 'Cáº£m Æ¡n / LÃ m Æ¡n', emoji: 'ğŸ™' },
              { id: '1-7', term: 'å†è¦‹', written: 'å†è¦‹', jyutping: 'zoi3 gin3', eng: 'Goodbye', urdu: 'Ø®Ø¯Ø§ Ø­Ø§ÙØ¸', viet: 'Táº¡m biá»‡t', emoji: 'ğŸ‘‹' },
            ]
          },
          {
            id: 'school_people',
            title: 'æ ¡åœ’äººç‰©',
            titleEng: 'People at School',
            emoji: 'ğŸ‘¨â€ğŸ«',
            theme: 'bg-blue-400',
            words: [
              { id: '2-1-2', term: 'æ ¡é•·', written: 'æ ¡é•·', jyutping: 'haau6 zoeng2', eng: 'Principal', urdu: 'Ù¾Ø±Ù†Ø³Ù¾Ù„', viet: 'Hiá»‡u trÆ°á»Ÿng', emoji: 'ğŸ‘¨â€ğŸ«' },
              { id: '2-1-3', term: 'è€å¸«', written: 'è€å¸«', jyutping: 'lou5 si1', eng: 'Teacher', urdu: 'Ø§Ø³ØªØ§Ø¯', viet: 'GiÃ¡o viÃªn', emoji: 'ğŸ‘©â€ğŸ«' },
              { id: '2-1-4', term: 'åŒå­¸', written: 'åŒå­¸', jyutping: 'tung4 hok6', eng: 'Classmate', urdu: 'ÛÙ… Ø¬Ù…Ø§Ø¹Øª', viet: 'Báº¡n há»c', emoji: 'ğŸ‘«' },
              { id: '2-1-5', term: 'å·¥å‹', written: 'æ ¡å·¥', jyutping: 'gung1 jau5', eng: 'Janitor', urdu: 'Ø§Ø³Ú©ÙˆÙ„ Ú©Ø§ Ù…Ù„Ø§Ø²Ù…', viet: 'NhÃ¢n viÃªn táº¡p vá»¥', emoji: 'ğŸ§¹' },
            ]
          },
          {
            id: 'school_facilities',
            title: 'æ ¡åœ’è¨­æ–½',
            titleEng: 'School Facilities',
            emoji: 'ğŸ«',
            theme: 'bg-indigo-400',
            words: [
              { id: '2-1-1', term: 'å­¸æ ¡', written: 'å­¸æ ¡', jyutping: 'hok6 haau6', eng: 'School', urdu: 'Ø§Ø³Ú©ÙˆÙ„', viet: 'TrÆ°á»ng há»c', emoji: 'ğŸ«' },
              { id: '2-2-1', term: 'èª²å®¤', written: 'æ•™å®¤', jyutping: 'fo3 sat1', eng: 'Classroom', urdu: 'Ú©Ù„Ø§Ø³ Ø±ÙˆÙ…', viet: 'PhÃ²ng há»c', emoji: 'ğŸª‘' },
              { id: '2-2-2', term: 'æ“å ´', written: 'æ“å ´', jyutping: 'cou1 coeng4', eng: 'Playground', urdu: 'Ú©Ú¾ÛŒÙ„ Ú©Ø§ Ù…ÛŒØ¯Ø§Ù†', viet: 'SÃ¢n chÆ¡i', emoji: 'ğŸƒ' },
              { id: '2-2-3', term: 'ç¦®å ‚', written: 'ç¦®å ‚', jyutping: 'lai5 tong4', eng: 'Hall', urdu: 'ÛØ§Ù„', viet: 'Há»™i trÆ°á»ng', emoji: 'ğŸŸï¸' },
              { id: '2-2-4', term: 'æ¨“æ¢¯', written: 'æ¨“æ¢¯', jyutping: 'lau4 tai1', eng: 'Stairs', urdu: 'Ø³ÛŒÚ‘Ú¾ÛŒØ§Úº', viet: 'Cáº§u thang', emoji: 'ğŸªœ' },
              { id: '2-2-6', term: 'å°é£Ÿéƒ¨', written: 'å°é£Ÿéƒ¨', jyutping: 'siu2 sik6 bou6', eng: 'Tuck shop', urdu: 'Ù¹Ú© Ø´Ø§Ù¾', viet: 'CÄƒn tin', emoji: 'ğŸ¥ª' },
              { id: '2-2-7', term: 'éŸ³æ¨‚å®¤', written: 'éŸ³æ¨‚å®¤', jyutping: 'jam1 ngok6 sat1', eng: 'Music Room', urdu: 'Ù…ÛŒÙˆØ²Ú© Ø±ÙˆÙ…', viet: 'PhÃ²ng Ã¢m nháº¡c', emoji: 'ğŸ¹' },
              { id: '2-2-8', term: 'æ ¡å‹™è™•', written: 'æ ¡å‹™è™•', jyutping: 'haau6 mou6 cyu3', eng: 'General Office', urdu: 'Ø¬Ù†Ø±Ù„ Ø¢ÙØ³', viet: 'VÄƒn phÃ²ng', emoji: 'ğŸ¢' },
              { id: '2-2-9', term: 'ç§‘å­¸å®¤', written: 'ç§‘å­¸å¯¦é©—å®¤', jyutping: 'fo1 hok6 sat1', eng: 'Science Lab', urdu: 'Ø³Ø§Ø¦Ù†Ø³ Ù„ÛŒØ¨', viet: 'PhÃ²ng thÃ­ nghiá»‡m', emoji: 'ğŸ§ª' },
              { id: '2-2-10', term: 'è¦–è—å®¤', written: 'è¦–è¦ºè—è¡“å®¤', jyutping: 'si6 ngai6 sat1', eng: 'Visual Arts Room', urdu: 'Ø¢Ø±Ù¹ Ø±ÙˆÙ…', viet: 'PhÃ²ng má»¹ thuáº­t', emoji: 'ğŸ¨' },
            ]
          },
          {
            id: 'numbers',
            title: 'æ•¸å­—',
            titleEng: 'Numbers',
            emoji: 'ğŸ”¢',
            theme: 'bg-green-400',
            words: [
              { id: '3-1', term: 'ä¸€', written: 'ä¸€', jyutping: 'jat1', eng: 'One', urdu: 'Ø§ÛŒÚ©', viet: 'Má»™t', emoji: '1ï¸âƒ£' },
              { id: '3-2', term: 'äºŒ', written: 'äºŒ', jyutping: 'ji6', eng: 'Two', urdu: 'Ø¯Ùˆ', viet: 'Hai', emoji: '2ï¸âƒ£' },
              { id: '3-3', term: 'ä¸‰', written: 'ä¸‰', jyutping: 'saam1', eng: 'Three', urdu: 'ØªÛŒÙ†', viet: 'Ba', emoji: '3ï¸âƒ£' },
              { id: '3-4', term: 'å››', written: 'å››', jyutping: 'sei3', eng: 'Four', urdu: 'Ú†Ø§Ø±', viet: 'Bá»‘n', emoji: '4ï¸âƒ£' },
              { id: '3-5', term: 'äº”', written: 'äº”', jyutping: 'ng5', eng: 'Five', urdu: 'Ù¾Ø§Ù†Ú†', viet: 'NÄƒm', emoji: '5ï¸âƒ£' },
              { id: '3-6', term: 'å…­', written: 'å…­', jyutping: 'luk6', eng: 'Six', urdu: 'Ú†Ú¾', viet: 'SÃ¡u', emoji: '6ï¸âƒ£' },
              { id: '3-7', term: 'ä¸ƒ', written: 'ä¸ƒ', jyutping: 'cat1', eng: 'Seven', urdu: 'Ø³Ø§Øª', viet: 'Báº£y', emoji: '7ï¸âƒ£' },
              { id: '3-8', term: 'å…«', written: 'å…«', jyutping: 'baat3', eng: 'Eight', urdu: 'Ø¢Ù¹Ú¾', viet: 'TÃ¡m', emoji: '8ï¸âƒ£' },
              { id: '3-9', term: 'ä¹', written: 'ä¹', jyutping: 'gau2', eng: 'Nine', urdu: 'Ù†Ùˆ', viet: 'ChÃ­n', emoji: '9ï¸âƒ£' },
              { id: '3-10', term: 'å', written: 'å', jyutping: 'sap6', eng: 'Ten', urdu: 'Ø¯Ø³', viet: 'MÆ°á»i', emoji: 'ğŸ”Ÿ' },
              { id: '3-11', term: 'ç™¾', written: 'ç™¾', jyutping: 'baak3', eng: 'Hundred', urdu: 'Ø³Ùˆ', viet: 'TrÄƒm', emoji: 'ğŸ’¯' },
              { id: '3-12', term: 'åƒ', written: 'åƒ', jyutping: 'cin1', eng: 'Thousand', urdu: 'ÛØ²Ø§Ø±', viet: 'NghÃ¬n', emoji: 'k' },
            ]
          },
          {
            id: 'datetime',
            title: 'æœˆä»½å’Œæ—¥å­',
            titleEng: 'Months & Days',
            emoji: 'ğŸ“…',
            theme: 'bg-orange-400',
            words: [
              { id: '4-1', term: 'ä¸€æœˆ', written: 'ä¸€æœˆ', jyutping: 'jat1 jyut6', eng: 'January', urdu: 'Ø¬Ù†ÙˆØ±ÛŒ', viet: 'ThÃ¡ng má»™t', emoji: 'ğŸ†' },
              { id: '4-2', term: 'äºŒæœˆ', written: 'äºŒæœˆ', jyutping: 'ji6 jyut6', eng: 'February', urdu: 'ÙØ±ÙˆØ±ÛŒ', viet: 'ThÃ¡ng hai', emoji: 'ğŸ§§' },
              { id: '4-3', term: 'ä¸‰æœˆ', written: 'ä¸‰æœˆ', jyutping: 'saam1 jyut6', eng: 'March', urdu: 'Ù…Ø§Ø±Ú†', viet: 'ThÃ¡ng ba', emoji: 'ğŸŒ±' },
              { id: '4-4', term: 'å››æœˆ', written: 'å››æœˆ', jyutping: 'sei3 jyut6', eng: 'April', urdu: 'Ø§Ù¾Ø±ÛŒÙ„', viet: 'ThÃ¡ng tÆ°', emoji: 'ğŸ‡' },
              { id: '4-5', term: 'äº”æœˆ', written: 'äº”æœˆ', jyutping: 'ng5 jyut6', eng: 'May', urdu: 'Ù…Ø¦ÛŒ', viet: 'ThÃ¡ng nÄƒm', emoji: 'ğŸ’' },
              { id: '4-6', term: 'å…­æœˆ', written: 'å…­æœˆ', jyutping: 'luk6 jyut6', eng: 'June', urdu: 'Ø¬ÙˆÙ†', viet: 'ThÃ¡ng sÃ¡u', emoji: 'â˜€ï¸' },
              { id: '4-7', term: 'ä¸ƒæœˆ', written: 'ä¸ƒæœˆ', jyutping: 'cat1 jyut6', eng: 'July', urdu: 'Ø¬ÙˆÙ„Ø§Ø¦ÛŒ', viet: 'ThÃ¡ng báº£y', emoji: 'ğŸ¦' },
              { id: '4-8', term: 'å…«æœˆ', written: 'å…«æœˆ', jyutping: 'baat3 jyut6', eng: 'August', urdu: 'Ø§Ú¯Ø³Øª', viet: 'ThÃ¡ng tÃ¡m', emoji: 'ğŸ–ï¸' },
              { id: '4-9', term: 'ä¹æœˆ', written: 'ä¹æœˆ', jyutping: 'gau2 jyut6', eng: 'September', urdu: 'Ø³ØªÙ…Ø¨Ø±', viet: 'ThÃ¡ng chÃ­n', emoji: 'ğŸ’' },
              { id: '4-10', term: 'åæœˆ', written: 'åæœˆ', jyutping: 'sap6 jyut6', eng: 'October', urdu: 'Ø§Ú©ØªÙˆØ¨Ø±', viet: 'ThÃ¡ng mÆ°á»i', emoji: 'ğŸƒ' },
              { id: '4-11', term: 'åä¸€æœˆ', written: 'åä¸€æœˆ', jyutping: 'sap6 jat1 jyut6', eng: 'November', urdu: 'Ù†ÙˆÙ…Ø¨Ø±', viet: 'ThÃ¡ng mÆ°á»i má»™t', emoji: 'ğŸ‚' },
              { id: '4-12', term: 'åäºŒæœˆ', written: 'åäºŒæœˆ', jyutping: 'sap6 ji6 jyut6', eng: 'December', urdu: 'Ø¯Ø³Ù…Ø¨Ø±', viet: 'ThÃ¡ng mÆ°á»i hai', emoji: 'ğŸ„' },
              { id: '4-13', term: 'æ˜ŸæœŸæ—¥', written: 'æ˜ŸæœŸæ—¥', jyutping: 'sing1 kei4 jat6', eng: 'Sunday', urdu: 'Ø§ØªÙˆØ§Ø±', viet: 'Chá»§ nháº­t', emoji: 'ğŸŒ' },
              { id: '4-14', term: 'æ˜ŸæœŸä¸€', written: 'æ˜ŸæœŸä¸€', jyutping: 'sing1 kei4 jat1', eng: 'Monday', urdu: 'Ù¾ÛŒØ±', viet: 'Thá»© hai', emoji: '1ï¸âƒ£' },
              { id: '4-15', term: 'æ˜ŸæœŸäºŒ', written: 'æ˜ŸæœŸäºŒ', jyutping: 'sing1 kei4 ji6', eng: 'Tuesday', urdu: 'Ù…Ù†Ú¯Ù„', viet: 'Thá»© ba', emoji: '2ï¸âƒ£' },
              { id: '4-16', term: 'æ˜ŸæœŸä¸‰', written: 'æ˜ŸæœŸä¸‰', jyutping: 'sing1 kei4 saam1', eng: 'Wednesday', urdu: 'Ø¨Ø¯Ú¾', viet: 'Thá»© tÆ°', emoji: '3ï¸âƒ£' },
              { id: '4-17', term: 'æ˜ŸæœŸå››', written: 'æ˜ŸæœŸå››', jyutping: 'sing1 kei4 sei3', eng: 'Thursday', urdu: 'Ø¬Ù…Ø¹Ø±Ø§Øª', viet: 'Thá»© nÄƒm', emoji: '4ï¸âƒ£' },
              { id: '4-18', term: 'æ˜ŸæœŸäº”', written: 'æ˜ŸæœŸäº”', jyutping: 'sing1 kei4 ng5', eng: 'Friday', urdu: 'Ø¬Ù…Ø¹Û', viet: 'Thá»© sÃ¡u', emoji: '5ï¸âƒ£' },
              { id: '4-19', term: 'æ˜ŸæœŸå…­', written: 'æ˜ŸæœŸå…­', jyutping: 'sing1 kei4 luk6', eng: 'Saturday', urdu: 'ÛÙØªÛ', viet: 'Thá»© báº£y', emoji: '6ï¸âƒ£' },
            ]
          },
          {
            id: 'time',
            title: 'æ™‚é–“',
            titleEng: 'Time',
            emoji: 'â°',
            theme: 'bg-red-400',
            words: [
              { id: '5-1', term: 'æ—©ä¸Š', written: 'æ—©ä¸Š', jyutping: 'zou2 soeng6', eng: 'Morning', urdu: 'ØµØ¨Ø­', viet: 'Buá»•i sÃ¡ng', emoji: 'ğŸŒ…' },
              { id: '5-2', term: 'ä¸­åˆ', written: 'ä¸­åˆ', jyutping: 'zung1 ng5', eng: 'Noon', urdu: 'Ø¯ÙˆÙ¾ÛØ±', viet: 'Buá»•i trÆ°a', emoji: 'â˜€ï¸' },
              { id: '5-3', term: 'ä¸‹åˆ', written: 'ä¸‹åˆ', jyutping: 'haa6 ng5', eng: 'Afternoon', urdu: 'Ø³Û Ù¾ÛØ±', viet: 'Buá»•i chiá»u', emoji: 'ğŸŒ¤ï¸' },
              { id: '5-4', term: 'æ™šä¸Š', written: 'æ™šä¸Š', jyutping: 'maan5 soeng6', eng: 'Night', urdu: 'Ø±Ø§Øª', viet: 'Buá»•i tá»‘i', emoji: 'ğŸŒ™' },
              { id: '5-5', term: 'æ™‚', written: 'å°æ™‚', jyutping: 'si4', eng: 'Hour', urdu: 'Ú¯Ú¾Ù†Ù¹Û', viet: 'Giá»', emoji: 'â³' },
              { id: '5-6', term: 'åˆ†', written: 'åˆ†é˜', jyutping: 'fan1', eng: 'Minute', urdu: 'Ù…Ù†Ù¹', viet: 'PhÃºt', emoji: 'â±ï¸' },
            ]
          },
          {
            id: 'emotions',
            title: 'æƒ…ç·’å–œå¥½',
            titleEng: 'Emotions',
            emoji: 'ğŸ˜Š',
            theme: 'bg-pink-400',
            words: [
              { id: '6-1', term: 'é–‹å¿ƒ', written: 'å¿«æ¨‚', jyutping: 'hoi1 sam1', eng: 'Happy', urdu: 'Ø®ÙˆØ´', viet: 'Vui váº»', emoji: 'ğŸ˜„' },
              { id: '6-2', term: 'é«˜èˆˆ', written: 'é«˜èˆˆ', jyutping: 'gou1 hing3', eng: 'Glad', urdu: 'Ø®ÙˆØ´', viet: 'HÃ¢n hoan', emoji: 'ğŸ˜†' },
              { id: '6-3', term: 'å‚·å¿ƒ', written: 'é›£é', jyutping: 'soeng1 sam1', eng: 'Sad', urdu: 'Ø§Ø¯Ø§Ø³', viet: 'Buá»“n', emoji: 'ğŸ˜¢' },
              { id: '6-4', term: 'ç”Ÿæ°£', written: 'æ†¤æ€’', jyutping: 'saang1 hei3', eng: 'Angry', urdu: 'Ù†Ø§Ø±Ø§Ø¶', viet: 'Tá»©c giáº­n', emoji: 'ğŸ˜¡' },
              { id: '6-5', term: 'é©š', written: 'å®³æ€•', jyutping: 'geng1', eng: 'Scared', urdu: 'Ø®ÙˆÙØ²Ø¯Û', viet: 'Sá»£ hÃ£i', emoji: 'ğŸ˜±' },
              { id: '6-6', term: 'é˜æ„', written: 'å–œæ­¡', jyutping: 'zung1 ji3', eng: 'Like', urdu: 'Ù¾Ø³Ù†Ø¯', viet: 'ThÃ­ch', emoji: 'â¤ï¸' },
            ]
          },
          {
            id: 'colors',
            title: 'é¡è‰²',
            titleEng: 'Colours',
            emoji: 'ğŸ¨',
            theme: 'bg-purple-400',
            words: [
              { id: '7-1', term: 'ç´…è‰²', written: 'ç´…è‰²', jyutping: 'hung4 sik1', eng: 'Red', urdu: 'Ø³Ø±Ø®', viet: 'MÃ u Ä‘á»', emoji: 'ğŸ”´' },
              { id: '7-2', term: 'è—è‰²', written: 'è—è‰²', jyutping: 'laam4 sik1', eng: 'Blue', urdu: 'Ù†ÛŒÙ„Ø§', viet: 'MÃ u xanh dÆ°Æ¡ng', emoji: 'ğŸ”µ' },
              { id: '7-3', term: 'é»ƒè‰²', written: 'é»ƒè‰²', jyutping: 'wong4 sik1', eng: 'Yellow', urdu: 'Ù¾ÛŒÙ„Ø§', viet: 'MÃ u vÃ ng', emoji: 'ğŸŸ¡' },
              { id: '7-4', term: 'ç¶ è‰²', written: 'ç¶ è‰²', jyutping: 'luk6 sik1', eng: 'Green', urdu: 'Ø³Ø¨Ø²', viet: 'MÃ u xanh lÃ¡', emoji: 'ğŸŸ¢' },
              { id: '7-5', term: 'ç™½è‰²', written: 'ç™½è‰²', jyutping: 'baak6 sik1', eng: 'White', urdu: 'Ø³ÙÛŒØ¯', viet: 'MÃ u tráº¯ng', emoji: 'âšª' },
              { id: '7-6', term: 'é»‘è‰²', written: 'é»‘è‰²', jyutping: 'hak1 sik1', eng: 'Black', urdu: 'Ø³ÛŒØ§Û', viet: 'MÃ u Ä‘en', emoji: 'âš«' },
              { id: '7-7', term: 'æ©™è‰²', written: 'æ©™è‰²', jyutping: 'caang2 sik1', eng: 'Orange', urdu: 'Ù…Ø§Ù„Ù¹Ø§', viet: 'MÃ u cam', emoji: 'ğŸŸ ' },
              { id: '7-8', term: 'ç´«è‰²', written: 'ç´«è‰²', jyutping: 'zi2 sik1', eng: 'Purple', urdu: 'Ø¬Ø§Ù…Ù†ÛŒ', viet: 'MÃ u tÃ­m', emoji: 'ğŸŸ£' },
              { id: '7-9', term: 'ç²‰ç´…è‰²', written: 'ç²‰ç´…è‰²', jyutping: 'fan2 hung4 sik1', eng: 'Pink', urdu: 'Ú¯Ù„Ø§Ø¨ÛŒ', viet: 'MÃ u há»“ng', emoji: 'ğŸŒ¸' },
            ]
          },
          {
            id: 'adjectives',
            title: 'å½¢å®¹è©',
            titleEng: 'Adjectives',
            emoji: 'ğŸ“',
            theme: 'bg-cyan-400',
            words: [
              { id: '8-1', term: 'å¤§', written: 'å¤§', jyutping: 'daai6', eng: 'Big', urdu: 'Ø¨Ú‘Ø§', viet: 'To/Lá»›n', emoji: 'ğŸ˜' },
              { id: '8-2', term: 'å°', written: 'å°', jyutping: 'siu2', eng: 'Small', urdu: 'Ú†Ú¾ÙˆÙ¹Ø§', viet: 'Nhá»/BÃ©', emoji: 'ğŸœ' },
              { id: '8-3', term: 'é•·', written: 'é•·', jyutping: 'coeng4', eng: 'Long', urdu: 'Ù„Ù…Ø¨Ø§', viet: 'DÃ i', emoji: 'ğŸ¦’' },
              { id: '8-4', term: 'çŸ­', written: 'çŸ­', jyutping: 'dyun2', eng: 'Short', urdu: 'Ù…Ø®ØªØµØ±', viet: 'Ngáº¯n', emoji: 'ğŸ›' },
              { id: '8-5', term: 'å¿«', written: 'å¿«', jyutping: 'faai3', eng: 'Fast', urdu: 'ØªÛŒØ²', viet: 'Nhanh', emoji: 'ğŸ†' },
              { id: '8-6', term: 'æ…¢', written: 'æ…¢', jyutping: 'maan6', eng: 'Slow', urdu: 'Ø¢ÛØ³ØªÛ', viet: 'Cháº­m', emoji: 'ğŸ¢' },
              { id: '8-7', term: 'é«˜', written: 'é«˜', jyutping: 'gou1', eng: 'Tall', urdu: 'Ù„Ù…Ø¨Ø§', viet: 'Cao', emoji: 'ğŸ¦’' },
              { id: '8-8', term: 'çŸ®', written: 'çŸ®', jyutping: 'ai2', eng: 'Short', urdu: 'Ú†Ú¾ÙˆÙ¹Ø§', viet: 'Tháº¥p', emoji: 'ğŸ•' },
            ]
          },
        ];

        // --- è¼”åŠ©åŠŸèƒ½ ---

        // éŸ³æ•ˆç”Ÿæˆå™¨ (Web Audio API) - ç”¨æ–¼åé¥‹éŸ³æ•ˆ
        const playFeedbackSound = (type) => {
          const AudioContext = window.AudioContext || window.webkitAudioContext;
          if (!AudioContext) return;
          
          const ctx = new AudioContext();
          const now = ctx.currentTime;
          
          if (type === 'correct') {
            // æœ‰è¶£çš„ã€Œå®ï¼ã€æ­£ç¢ºéŸ³æ•ˆ
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            
            osc.type = 'triangle';
            osc.frequency.setValueAtTime(523.25, now);
            osc.frequency.linearRampToValueAtTime(1046.50, now + 0.1);
            
            gain.gain.setValueAtTime(0, now);
            gain.gain.linearRampToValueAtTime(0.3, now + 0.05);
            gain.gain.exponentialRampToValueAtTime(0.01, now + 0.4);
            
            osc.start(now);
            osc.stop(now + 0.4);

            const osc2 = ctx.createOscillator();
            const gain2 = ctx.createGain();
            osc2.connect(gain2);
            gain2.connect(ctx.destination);
            osc2.type = 'sine';
            
            osc2.frequency.setValueAtTime(783.99, now);
            osc2.frequency.linearRampToValueAtTime(1567.98, now + 0.1);
            
            gain2.gain.setValueAtTime(0, now);
            gain2.gain.linearRampToValueAtTime(0.1, now + 0.05);
            gain2.gain.exponentialRampToValueAtTime(0.01, now + 0.4);
            
            osc2.start(now);
            osc2.stop(now + 0.4);

          } else {
            // æœ‰è¶£çš„ã€ŒBwoopã€éŒ¯èª¤éŸ³æ•ˆ
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(300, now);
            osc.frequency.exponentialRampToValueAtTime(50, now + 0.3);
            
            gain.gain.setValueAtTime(0.1, now);
            gain.gain.linearRampToValueAtTime(0.01, now + 0.3);
            
            osc.start(now);
            osc.stop(now + 0.3);
          }
        };

        const speakCantonese = (text) => {
          if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 0.8; 
            const voices = window.speechSynthesis.getVoices();
            const cantoneseVoice = voices.find(v => v.lang.includes('HK') || v.lang.includes('yue'));
            if (cantoneseVoice) {
              utterance.voice = cantoneseVoice;
              utterance.lang = cantoneseVoice.lang;
            } else {
              utterance.lang = 'zh-HK';
            }
            window.speechSynthesis.speak(utterance);
          } else {
            alert("æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æŒèªéŸ³åˆæˆåŠŸèƒ½ã€‚");
          }
        };

        // --- å…±ç”¨ UI å…ƒä»¶ ---

        const GameButton3D = ({ onClick, colorClass, children, className = "" }) => (
          <button 
            onClick={onClick}
            className={`${colorClass} ${className} relative text-white font-bold py-4 px-6 rounded-3xl border-b-8 border-opacity-30 border-black active:border-b-0 active:translate-y-2 transition-all transform hover:-translate-y-1 shadow-xl`}
          >
            {children}
          </button>
        );

        const IconButton = ({ onClick, icon: Icon, color, label }) => (
          <button 
            onClick={onClick}
            className={`flex flex-col items-center justify-center w-28 h-28 rounded-full shadow-[0_8px_0_rgba(0,0,0,0.15)] active:shadow-none active:translate-y-2 transition-all transform hover:scale-105 border-4 border-white ${color}`}
          >
            <Icon size={40} className="text-white drop-shadow-md" />
            <span className="text-white font-bold mt-1 text-sm drop-shadow-md">{label}</span>
          </button>
        );

        const BackgroundDecorations = () => (
          <div className="fixed inset-0 pointer-events-none overflow-hidden z-0 opacity-20">
            <div className="absolute top-10 left-10 text-9xl animate-pulse">â˜ï¸</div>
            <div className="absolute top-20 right-20 text-8xl animate-bounce-slow">ğŸŒŸ</div>
            <div className="absolute bottom-10 left-20 text-8xl animate-bounce">ğŸˆ</div>
            <div className="absolute bottom-40 right-10 text-9xl">ğŸŒˆ</div>
          </div>
        );

        // --- çµ„ä»¶ ---

        // ä¸»ç•«é¢
        const HomeScreen = ({ onNavigate }) => (
          <div className="relative flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-sky-300 to-indigo-200 p-4 overflow-hidden">
            <BackgroundDecorations />
            
            <div className="z-10 text-center space-y-6 mb-12">
              <div className="bg-white/30 backdrop-blur-md p-6 rounded-full border-4 border-white shadow-xl inline-block mb-4">
                <span className="text-8xl">ğŸ¼</span>
              </div>
              <h1 className="text-6xl md:text-7xl font-black text-white drop-shadow-[0_4px_4px_rgba(0,0,0,0.3)] tracking-wider stroke-text">
                å»£æ±è©±<br/>è¶£å‘³å­¸å ‚
              </h1>
              <p className="text-2xl text-indigo-900 font-bold bg-white/50 inline-block px-6 py-2 rounded-full">
                Cantonese Fun Learning
              </p>
            </div>
            
            <div className="z-10 grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl px-4">
              <GameButton3D 
                onClick={() => onNavigate('learning')} 
                colorClass="bg-gradient-to-br from-green-400 to-emerald-500"
                className="flex flex-col items-center justify-center py-10"
              >
                <div className="bg-white/20 p-6 rounded-full mb-4 animate-bounce-slow">
                  <BookOpen size={64} className="text-white" />
                </div>
                <h2 className="text-4xl font-black mb-2">å­¸ç¿’å€</h2>
                <p className="text-green-100 font-medium text-lg">Learning Zone</p>
              </GameButton3D>

              <GameButton3D 
                onClick={() => onNavigate('quiz')} 
                colorClass="bg-gradient-to-br from-orange-400 to-red-500"
                className="flex flex-col items-center justify-center py-10"
              >
                <div className="bg-white/20 p-6 rounded-full mb-4 animate-pulse">
                  <Brain size={64} className="text-white" />
                </div>
                <h2 className="text-4xl font-black mb-2">æ¸¬è©¦å€</h2>
                <p className="text-orange-100 font-medium text-lg">Quiz Zone</p>
              </GameButton3D>
            </div>
          </div>
        );

        // å­¸ç¿’å€ï¼šä¸»é¡Œé¸æ“‡
        const CategoryList = ({ onSelectCategory, onBack }) => {
          return (
            <div className="min-h-screen bg-amber-50 p-6 relative">
              <div className="max-w-7xl mx-auto relative z-10">
                <div className="flex items-center mb-8">
                  <button onClick={onBack} className="bg-white text-amber-600 p-3 rounded-full shadow-lg border-4 border-amber-200 hover:scale-110 transition-transform">
                    <ArrowLeft size={32} strokeWidth={3} />
                  </button>
                  <h2 className="text-4xl md:text-5xl font-black text-amber-600 ml-6 tracking-wide text-shadow-sm">
                    é¸æ“‡å­¸ç¿’ä¸»é¡Œ
                  </h2>
                </div>
                
                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                  {vocabData.map((cat) => (
                    <div key={cat.id} className="relative group">
                      <button
                        onClick={() => onSelectCategory(cat)}
                        className={`${cat.theme} w-full relative rounded-[2rem] p-6 shadow-[0_8px_0_rgba(0,0,0,0.15)] active:shadow-none active:translate-y-2 hover:-translate-y-2 transition-all border-4 border-white flex flex-col items-center justify-between min-h-[220px]`}
                      >
                        <span className="text-7xl drop-shadow-md transform group-hover:scale-125 transition-transform duration-300">
                          {cat.emoji}
                        </span>
                        <div className="w-full bg-black/10 rounded-xl py-2 mt-4 backdrop-blur-sm">
                          <span className="text-2xl font-black text-white block text-center shadow-black drop-shadow-md">
                            {cat.title}
                          </span>
                          <span className="text-md font-bold text-white/90 block text-center mt-1">
                            {cat.titleEng}
                          </span>
                        </div>
                      </button>
                    </div>
                  ))}
                </div>
              </div>
              
              {/* èƒŒæ™¯è£é£¾ */}
              <div className="fixed bottom-0 left-0 w-full h-24 bg-repeat-x opacity-20" style={{backgroundImage: 'radial-gradient(circle, #f59e0b 20%, transparent 20%)', backgroundSize: '40px 40px'}}></div>
            </div>
          );
        };

        // å­¸ç¿’å€ï¼šå–®å­—å¡
        const WordCard = ({ word, onNext, onPrev, onBack, categoryColor }) => {
          const [isListening, setIsListening] = useState(false);
          const [feedback, setFeedback] = useState(null); 
          const recognitionRef = useRef(null);
          
          const handleSpeak = () => speakCantonese(word.term);

          // ç•¶å­—è©æ”¹è®Šæ™‚ï¼Œåœæ­¢éŒ„éŸ³ä¸¦é‡ç½® AI ç‹€æ…‹
          useEffect(() => {
            if (recognitionRef.current) {
              recognitionRef.current.onresult = null;
              recognitionRef.current.onend = null;
              recognitionRef.current.stop();
            }
            setIsListening(false);
            setFeedback(null);
          }, [word]);

          const handleListen = () => {
            if (!('webkitSpeechRecognition' in window)) {
              alert("è«‹ä½¿ç”¨ Chrome ç€è¦½å™¨");
              return;
            }

            if (recognitionRef.current) {
              recognitionRef.current.stop();
            }

            const recognition = new window.webkitSpeechRecognition();
            recognition.lang = 'zh-HK';
            recognition.continuous = false;
            recognition.interimResults = false;

            recognitionRef.current = recognition;

            recognition.onstart = () => {
              setIsListening(true);
              setFeedback(null);
            };

            recognition.onend = () => {
              setIsListening(false);
            };

            recognition.onresult = (event) => {
              const transcript = event.results[0][0].transcript;
              if (transcript.includes(word.term) || transcript.includes(word.written)) {
                setFeedback('correct');
              } else {
                setFeedback('incorrect');
              }
            };
            recognition.start();
          };

          return (
            <div className={`min-h-screen ${categoryColor} flex flex-col items-center justify-center p-4 transition-colors duration-500`}>
              <div className="w-full max-w-5xl mb-6 flex justify-between items-center z-10">
                <button onClick={onBack} className="bg-white/20 text-white p-3 rounded-full hover:bg-white/40 transition-colors backdrop-blur-md border-2 border-white/50">
                  <Home size={32} />
                </button>
                <div className="bg-white/20 px-6 py-2 rounded-full text-white font-bold backdrop-blur-md border-2 border-white/50">
                  å­¸ç¿’æ¨¡å¼
                </div>
              </div>

              <div className="relative bg-white rounded-[3rem] shadow-[0_12px_0_rgba(0,0,0,0.1)] p-8 w-full max-w-3xl text-center border-8 border-white">
                
                {/* Navigation Arrows */}
                <button onClick={onPrev} className="absolute -left-4 md:-left-16 top-1/2 transform -translate-y-1/2 p-4 bg-white rounded-full shadow-lg text-gray-400 hover:text-gray-800 hover:scale-110 transition-all border-4 border-gray-100">
                  <ArrowLeft size={32} strokeWidth={3} />
                </button>
                <button onClick={onNext} className="absolute -right-4 md:-right-16 top-1/2 transform -translate-y-1/2 p-4 bg-white rounded-full shadow-lg text-gray-400 hover:text-gray-800 hover:scale-110 transition-all rotate-180 border-4 border-gray-100">
                  <ArrowLeft size={32} strokeWidth={3} />
                </button>

                <div className="mb-4">
                  <div className="inline-block p-8 bg-yellow-50 rounded-full mb-6 border-4 border-yellow-100 animate-bounce-slow">
                    <span className="text-9xl filter drop-shadow-md">{word.emoji}</span>
                  </div>
                  
                  <h1 className="text-7xl md:text-8xl font-black text-gray-800 mb-4 tracking-tight">
                    {word.term}
                  </h1>
                  
                  <div className="inline-block bg-blue-100 px-6 py-2 rounded-2xl mb-8 transform -rotate-2">
                    <p className="text-3xl text-blue-600 font-mono font-bold tracking-wide">{word.jyutping}</p>
                  </div>
                  
                  {word.term !== word.written && (
                    <p className="text-xl text-gray-400 font-bold mb-6">æ›¸é¢èª: {word.written}</p>
                  )}

                  <div className="grid grid-cols-1 md:grid-cols-3 gap-4 bg-gray-50 p-6 rounded-3xl border-4 border-gray-100">
                     <div className="bg-blue-50 p-3 rounded-2xl">
                       <span className="block text-xs text-blue-400 font-black uppercase tracking-wider mb-1">English</span>
                       <span className="text-xl font-bold text-blue-900">{word.eng}</span>
                     </div>
                     <div className="bg-green-50 p-3 rounded-2xl">
                       <span className="block text-xs text-green-400 font-black uppercase tracking-wider mb-1">Urdu</span>
                       <span className="text-xl font-bold text-green-900 font-urdu">{word.urdu}</span>
                     </div>
                     <div className="bg-pink-50 p-3 rounded-2xl">
                       <span className="block text-xs text-pink-400 font-black uppercase tracking-wider mb-1">Vietnamese</span>
                       <span className="text-xl font-bold text-pink-900">{word.viet}</span>
                     </div>
                  </div>
                </div>

                <div className="flex justify-center space-x-8">
                  <IconButton 
                    onClick={handleSpeak} 
                    icon={Volume2} 
                    color="bg-blue-400 hover:bg-blue-500" 
                    label="è½è½çœ‹" 
                  />
                  <IconButton 
                    onClick={handleListen} 
                    icon={Mic} 
                    color={`${isListening ? 'bg-red-500 animate-pulse' : 'bg-purple-400 hover:bg-purple-500'}`} 
                    label={isListening ? 'è†è½ä¸­...' : 'è®€è®€çœ‹'} 
                  />
                </div>

                {/* AI Feedback Overlay */}
                {feedback && (
                  <div className="absolute inset-0 bg-white/90 rounded-[2.5rem] flex flex-col items-center justify-center z-20 animate-fadeIn backdrop-blur-sm">
                    {feedback === 'correct' ? (
                      <div className="text-center animate-bounce">
                        <div className="text-9xl mb-4">ğŸŒŸ</div>
                        <h3 className="text-4xl font-black text-green-500 mb-2">å¤ªæ£’äº†ï¼</h3>
                        <p className="text-gray-500 font-bold">è®€å¾—éå¸¸æ¨™æº–ï¼</p>
                        <button onClick={() => setFeedback(null)} className="mt-8 bg-green-500 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition-transform">
                          ç¹¼çºŒå­¸ç¿’
                        </button>
                      </div>
                    ) : (
                      <div className="text-center">
                        <div className="text-8xl mb-4">ğŸ’ª</div>
                        <h3 className="text-4xl font-black text-orange-500 mb-2">åŠ æ²¹ï¼</h3>
                        <p className="text-gray-500 font-bold">å†è©¦ä¸€æ¬¡å§ï¼</p>
                        <button onClick={() => setFeedback(null)} className="mt-8 bg-orange-400 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition-transform">
                          å†è©¦ä¸€æ¬¡
                        </button>
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          );
        };

        // æ¸¬è©¦å€ï¼šæ¨¡å¼é¸æ“‡
        const QuizModeSelect = ({ onSelectMode, onBack }) => (
          <div className="min-h-screen bg-violet-100 flex flex-col items-center justify-center p-6 relative overflow-hidden">
            <div className="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none" style={{backgroundImage: 'radial-gradient(#8b5cf6 2px, transparent 2px)', backgroundSize: '30px 30px'}}></div>
            
            <button onClick={onBack} className="absolute top-6 left-6 bg-white p-3 rounded-full shadow-lg text-violet-600 border-4 border-violet-200 z-10">
              <Home size={32} strokeWidth={3} />
            </button>
            
            <div className="text-center mb-12 relative z-10">
              <span className="text-6xl mb-4 block animate-bounce">ğŸ®</span>
              <h2 className="text-5xl font-black text-violet-800 drop-shadow-sm">é¸æ“‡éŠæˆ²æ¨¡å¼</h2>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-10 w-full max-w-5xl px-4 z-10">
              <GameButton3D 
                onClick={() => onSelectMode('reading')} 
                colorClass="bg-cyan-500"
                className="flex flex-col items-center py-12"
              >
                <div className="bg-white/20 p-8 rounded-full mb-6 border-4 border-white/30">
                  <BookOpen size={64} className="text-white" />
                </div>
                <h3 className="text-3xl font-black">é–±è®€æŒ‘æˆ°</h3>
                <p className="mt-2 text-cyan-100 font-bold opacity-90">çœ‹æ–‡å­—ï¼Œé¸ç­”æ¡ˆ</p>
              </GameButton3D>

              <GameButton3D 
                onClick={() => onSelectMode('listening')} 
                colorClass="bg-pink-500"
                className="flex flex-col items-center py-12"
              >
                <div className="bg-white/20 p-8 rounded-full mb-6 border-4 border-white/30">
                  <Music size={64} className="text-white" />
                </div>
                <h3 className="text-3xl font-black">è½åŠ›æŒ‘æˆ°</h3>
                <p className="mt-2 text-pink-100 font-bold opacity-90">è½è²éŸ³ï¼Œé¸ç­”æ¡ˆ</p>
              </GameButton3D>
            </div>
          </div>
        );

        // æ¸¬è©¦å€ï¼šéŠæˆ²ç•«é¢
        const QuizGame = ({ mode, onBack }) => {
          const [questions, setQuestions] = useState([]);
          const [currentQIndex, setCurrentQIndex] = useState(0);
          const [score, setScore] = useState(0);
          const [showResult, setShowResult] = useState(false);
          const [answered, setAnswered] = useState(false);
          const [selectedOption, setSelectedOption] = useState(null);

          useEffect(() => {
            const allWords = vocabData.flatMap(cat => cat.words);
            const shuffled = [...allWords].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, 10).map(word => {
              const distractors = allWords
                .filter(w => w.id !== word.id)
                .sort(() => 0.5 - Math.random())
                .slice(0, 3)
                .map(w => w.term);
              const options = [...distractors, word.term].sort(() => 0.5 - Math.random());
              return { ...word, options };
            });
            setQuestions(selected);
          }, []);

          const handleOptionClick = (option) => {
            if (answered) return;
            setSelectedOption(option);
            setAnswered(true);
            if (option === questions[currentQIndex].term) {
              setScore(s => s + 10);
              playFeedbackSound('correct'); // ä¿®æ”¹ï¼šæ’­æ”¾æ­£ç¢ºéŸ³æ•ˆ
            } else {
              playFeedbackSound('incorrect'); // ä¿®æ”¹ï¼šæ’­æ”¾éŒ¯èª¤éŸ³æ•ˆ
            }
          };

          const handleNext = () => {
            if (currentQIndex < questions.length - 1) {
              setCurrentQIndex(c => c + 1);
              setAnswered(false);
              setSelectedOption(null);
            } else {
              setShowResult(true);
            }
          };

          if (questions.length === 0) return <div className="flex h-screen items-center justify-center text-3xl font-bold text-gray-500">æº–å‚™éŠæˆ²ä¸­...</div>;

          if (showResult) {
            return (
              <div className="min-h-screen bg-yellow-400 flex flex-col items-center justify-center p-6 relative overflow-hidden">
                <BackgroundDecorations />
                <div className="bg-white p-12 rounded-[3rem] shadow-[0_20px_0_rgba(0,0,0,0.1)] text-center max-w-xl w-full border-8 border-white relative z-10 animate-bounce-slow">
                  <div className="absolute -top-16 left-1/2 transform -translate-x-1/2">
                    <Trophy size={120} className="text-yellow-500 drop-shadow-lg fill-current" />
                  </div>
                  <h2 className="text-5xl font-black text-gray-800 mb-6 mt-12">æŒ‘æˆ°å®Œæˆï¼</h2>
                  <div className="bg-gray-100 rounded-3xl p-8 mb-8">
                    <p className="text-2xl text-gray-500 mb-2 font-bold">ä½ çš„å¾—åˆ†</p>
                    <span className="text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-500">
                      {score}
                    </span>
                  </div>
                  <GameButton3D onClick={onBack} colorClass="bg-blue-500 w-full" className="text-2xl">
                    è¿”å›æ¸¬è©¦å€
                  </GameButton3D>
                </div>
              </div>
            );
          }

          const currentQ = questions[currentQIndex];

          return (
            <div className="min-h-screen bg-sky-200 flex flex-col items-center p-4">
              <div className="w-full max-w-4xl flex justify-between items-center mb-6 mt-4">
                <button onClick={onBack} className="bg-white/30 p-3 rounded-full hover:bg-white/50 text-white border-2 border-white/50">
                  <XCircle size={32} />
                </button>
                <div className="flex space-x-4">
                  <div className="bg-white/30 px-6 py-2 rounded-full text-white font-bold border-2 border-white/50 backdrop-blur-sm">
                    ç¬¬ {currentQIndex + 1} / {questions.length} é¡Œ
                  </div>
                  <div className="bg-yellow-400 px-6 py-2 rounded-full text-yellow-900 font-bold border-b-4 border-yellow-600 shadow-lg">
                    å¾—åˆ†: {score}
                  </div>
                </div>
              </div>

              <div className="w-full max-w-3xl bg-white rounded-[2.5rem] shadow-[0_10px_0_rgba(0,0,0,0.1)] p-10 mb-8 text-center min-h-[320px] flex flex-col justify-center items-center border-4 border-white relative">
                {mode === 'reading' ? (
                  <>
                     <div className="text-9xl mb-6 animate-bounce-slow">{currentQ.emoji}</div>
                     <p className="text-4xl text-gray-700 font-black mb-2">{currentQ.eng}</p>
                     <div className="flex space-x-4 text-xl text-gray-400 font-bold">
                       <span>{currentQ.urdu}</span>
                       <span>â€¢</span>
                       <span>{currentQ.viet}</span>
                     </div>
                  </>
                ) : (
                  <>
                     <button 
                       onClick={() => speakCantonese(currentQ.term)}
                       className="bg-blue-400 hover:bg-blue-500 text-white rounded-full p-10 shadow-[0_10px_0_rgba(0,0,0,0.2)] active:shadow-none active:translate-y-2 transition-all"
                     >
                       <Volume2 size={80} />
                     </button>
                     <p className="mt-6 text-gray-400 font-bold text-xl">é»æ“Šå–‡å­è†è½è®€éŸ³</p>
                  </>
                )}
              </div>

              <div className="grid grid-cols-2 gap-6 w-full max-w-3xl">
                {currentQ.options.map((opt, idx) => {
                  let btnClass = "bg-white text-gray-600 border-b-8 border-gray-200 hover:-translate-y-1 hover:border-gray-300";
                  
                  if (answered) {
                    if (opt === currentQ.term) btnClass = "bg-green-400 text-white border-green-600 shadow-none translate-y-1"; 
                    else if (opt === selectedOption) btnClass = "bg-red-400 text-white border-red-600 opacity-50"; 
                    else btnClass = "bg-gray-100 text-gray-300 border-transparent opacity-50"; 
                  }

                  return (
                    <button 
                      key={idx} 
                      onClick={() => handleOptionClick(opt)}
                      disabled={answered}
                      className={`${btnClass} text-3xl font-black py-8 rounded-3xl shadow-lg transition-all duration-200 border-2 border-t-0 border-l-0 border-r-0`}
                    >
                      {opt}
                    </button>
                  );
                })}
              </div>

              {answered && (
                <div className="fixed bottom-8 w-full flex justify-center z-20">
                  <button 
                    onClick={handleNext}
                    className="bg-indigo-600 hover:bg-indigo-700 text-white text-2xl font-black px-16 py-5 rounded-full shadow-[0_10px_0_rgba(0,0,0,0.3)] hover:-translate-y-1 active:translate-y-2 active:shadow-none transition-all animate-bounce"
                  >
                    ä¸‹ä¸€é¡Œ â”
                  </button>
                </div>
              )}
            </div>
          );
        };

        // --- ä¸»æ‡‰ç”¨ç¨‹å¼å…¥å£ ---

        function App() {
          const [view, setView] = useState('home'); 
          const [selectedCategory, setSelectedCategory] = useState(null);
          const [currentWordIndex, setCurrentWordIndex] = useState(0);
          const [quizMode, setQuizMode] = useState(null);

          const handleSelectCategory = (cat) => {
            setSelectedCategory(cat);
            setCurrentWordIndex(0);
            setView('learning-detail');
          };

          const handleWordNav = (direction) => {
            if (!selectedCategory) return;
            if (direction === 'next') {
              setCurrentWordIndex((prev) => (prev + 1) % selectedCategory.words.length);
            } else {
              setCurrentWordIndex((prev) => (prev - 1 + selectedCategory.words.length) % selectedCategory.words.length);
            }
          };

          const handleSelectQuizMode = (mode) => {
            setQuizMode(mode);
            setView('quiz-game');
          };

          return (
            <div className="font-sans antialiased text-gray-900 bg-gray-50 min-h-screen selection:bg-yellow-200 selection:text-yellow-900">
              {view === 'home' && <HomeScreen onNavigate={setView} />}
              
              {view === 'learning' && (
                <CategoryList 
                  onSelectCategory={handleSelectCategory} 
                  onBack={() => setView('home')} 
                />
              )}

              {view === 'learning-detail' && selectedCategory && (
                <WordCard 
                  word={selectedCategory.words[currentWordIndex]} 
                  categoryColor={selectedCategory.theme}
                  onNext={() => handleWordNav('next')}
                  onPrev={() => handleWordNav('prev')}
                  onBack={() => setView('learning')}
                />
              )}

              {view === 'quiz' && (
                <QuizModeSelect 
                  onSelectMode={handleSelectQuizMode}
                  onBack={() => setView('home')}
                />
              )}

              {view === 'quiz-game' && (
                <QuizGame 
                  mode={quizMode} 
                  onBack={() => setView('quiz')}
                />
              )}
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
